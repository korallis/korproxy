<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:KorProxy.ViewModels"
             xmlns:mi="using:Material.Icons.Avalonia"
             x:Class="KorProxy.Views.LoginView"
             x:DataType="vm:LoginViewModel"
             Background="{StaticResource Surface0Brush}">

    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
        <Border Padding="40"
                Background="{StaticResource Surface1Brush}"
                CornerRadius="16"
                BorderBrush="{StaticResource BorderSubtleBrush}"
                BorderThickness="1"
                MaxWidth="400"
                MinWidth="360">
            <StackPanel Spacing="24">
                <!-- Logo -->
                <StackPanel Spacing="12" HorizontalAlignment="Center">
                    <Border Width="56" Height="56"
                            CornerRadius="14"
                            Background="{StaticResource BrandGradientBrush}"
                            HorizontalAlignment="Center">
                        <TextBlock Text="K"
                                   FontSize="24"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />
                    </Border>
                    <TextBlock Text="Welcome to KorProxy"
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               HorizontalAlignment="Center" />
                    <TextBlock Text="Sign in to manage your AI gateway"
                               FontSize="13"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               HorizontalAlignment="Center" />
                </StackPanel>

                <!-- Error Message -->
                <Border IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                        Background="{StaticResource StatusErrorBgBrush}"
                        BorderBrush="{StaticResource StatusErrorBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="12">
                    <TextBlock Text="{Binding ErrorMessage}"
                               FontSize="12"
                               Foreground="{StaticResource StatusErrorBrush}"
                               TextWrapping="Wrap" />
                </Border>

                <!-- Form -->
                <StackPanel Spacing="16">
                    <StackPanel Spacing="6">
                        <TextBlock Text="Email"
                                   FontSize="13"
                                   FontWeight="Medium"
                                   Foreground="{StaticResource TextSecondaryBrush}" />
                        <TextBox Text="{Binding Email}"
                                 Watermark="Enter your email"
                                 IsEnabled="{Binding !IsLoading}" />
                    </StackPanel>

                    <StackPanel Spacing="6">
                        <TextBlock Text="Password"
                                   FontSize="13"
                                   FontWeight="Medium"
                                   Foreground="{StaticResource TextSecondaryBrush}" />
                        <TextBox Text="{Binding Password}"
                                 PasswordChar="â€¢"
                                 Watermark="Enter your password"
                                 IsEnabled="{Binding !IsLoading}" />
                    </StackPanel>
                </StackPanel>

                <!-- Actions -->
                <StackPanel Spacing="12">
                    <Button Command="{Binding LoginCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Center"
                            IsEnabled="{Binding !IsLoading}"
                            Padding="16,12">
                        <Grid>
                            <TextBlock Text="Sign In"
                                       IsVisible="{Binding !IsLoading}"
                                       FontWeight="SemiBold" />
                            <StackPanel Orientation="Horizontal" Spacing="8" IsVisible="{Binding IsLoading}">
                                <ProgressBar IsIndeterminate="True" Width="16" Height="16" />
                                <TextBlock Text="Signing in..." />
                            </StackPanel>
                        </Grid>
                    </Button>
                    
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                        <TextBlock Text="Don't have an account?"
                                   FontSize="13"
                                   Foreground="{StaticResource TextSecondaryBrush}" />
                        <Button Content="Sign up"
                                Command="{Binding NavigateToRegisterCommand}"
                                Classes="Hyperlink"
                                Padding="0" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
