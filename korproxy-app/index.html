<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="
        default-src 'self';
        script-src 'self' 'unsafe-inline';
        style-src 'self' 'unsafe-inline';
        img-src 'self' data: https:;
        font-src 'self' data:;
        connect-src 'self' http://localhost:* https://*.convex.cloud wss://*.convex.cloud https://accounts.google.com https://oauth.anthropic.com https://auth.openai.com;
        frame-src 'none';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
      "
    />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <title>KorProxy</title>
    <!-- Inline theme script to prevent flash of wrong theme -->
    <script>
      (function() {
        try {
          var stored = localStorage.getItem('korproxy-theme-storage');
          var theme = stored ? JSON.parse(stored).state.theme : 'dark';
          var resolved = theme === 'system'
            ? (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
            : theme;
          document.documentElement.classList.add(resolved);
        } catch (e) {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
    <style>
      /* Smooth theme transition */
      html.theme-transition,
      html.theme-transition *,
      html.theme-transition *::before,
      html.theme-transition *::after {
        transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, fill 0.2s ease !important;
      }
      @media (prefers-reduced-motion: reduce) {
        html.theme-transition,
        html.theme-transition *,
        html.theme-transition *::before,
        html.theme-transition *::after {
          transition: none !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
